(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{176:function(e,n,t){},177:function(e,n,t){},266:function(e,n){e.exports={username:/[a-z0-9]{3,30}/,password:/.{8,}/,phoneNumber:/^([+84|84|0]+([35789]))+([0-9]{8})$/,email:/^[a-z][a-z0-9_\.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/}},268:function(e,n,t){"use strict";t.r(n);t(165),t(166),t(167);var a=t(0),r=t(21),s=t.n(r),c=t(44),o=(t(176),t(273)),i=t(42),l=Object(i.a)(),u=function(){return l},h=(t(177),t(270)),j=t(38),b=t(271),m=t(272),d=t(275),p=t(276),g=t(278),O=t(287),x=t(288),f=t(40),w=t.n(f),C=t(70),k=t(157),v=t(36),N=t(277),y=t(73),E=t.n(y),P=t(122),I=t.n(P),S=t(123),M=t.n(S),R=t(274),T=t(279),_=t(6),F=function(e){var n=e.onForgot,t=e.onUsernameChange,a=e.onPasswordChange,r=e.onLogin;return Object(_.jsxs)(R.a,{name:"login",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!0},autoComplete:"off",children:[Object(_.jsx)(R.a.Item,{label:"T\xean \u0111\u0103ng nh\u1eadp",name:"username",type:"string",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp!"}],children:Object(_.jsx)(p.a,{onChange:t,allowClear:!0,onPressEnter:r})}),Object(_.jsx)(R.a.Item,{label:"M\u1eadt kh\u1ea9u",name:"password",type:"string",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!"}],children:Object(_.jsx)(p.a.Password,{onChange:a,allowClear:!0,onPressEnter:r})}),Object(_.jsx)(R.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(_.jsx)(T.a,{children:"Nh\u1edb t\xe0i kho\u1ea3n"})}),Object(_.jsx)(R.a.Item,{name:"forgot",wrapperCol:{offset:8,span:16},children:Object(_.jsx)(v.a,{id:"btn_forgot",type:"link",htmlType:"button",onClick:n,children:"Qu\xean m\u1eadt kh\u1ea9u?"})})]})},H=function(e){var n=e.onFirstNameChange,t=e.onLastNameChange,a=e.onPhoneNumberChange,r=e.onUsernameChange,s=e.onPasswordChange,c=e.onRePasswordChange,o=e.onAddressChange,i=e.onEmailChange,l=e.onRegister;return Object(_.jsxs)(R.a,{name:"register",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!0},autoComplete:"off",children:[Object(_.jsx)(R.a.Item,{label:"H\u1ecd v\xe0 \u0111\u1ec7m",name:"firstName",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 \u0111\u1ec7m!"}],children:Object(_.jsx)(p.a,{onChange:n,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"T\xean",name:"lastName",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean!"}],children:Object(_.jsx)(p.a,{onChange:t,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phoneNumber",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"}],children:Object(_.jsx)(p.a,{onChange:a,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"T\xe0i kho\u1ea3n",name:"username",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xe0i kho\u1ea3n!"}],children:Object(_.jsx)(p.a,{onChange:r,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"M\u1eadt kh\u1ea9u",name:"password",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!"}],children:Object(_.jsx)(p.a.Password,{onChange:s,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"Nh\u1eadp l\u1ea1i",name:"re-password",rules:[{required:!0,message:"Nh\u1eadp l\u1ea1i m\xe2t kh\u1ea9u!"}],children:Object(_.jsx)(p.a.Password,{onChange:c,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"\u0110\u1ecba ch\u1ec9",name:"address",children:Object(_.jsx)(p.a,{onChange:o,allowClear:!0,onPressEnter:l})}),Object(_.jsx)(R.a.Item,{label:"Email",name:"email",children:Object(_.jsx)(p.a,{onChange:i,allowClear:!0,onPressEnter:l})})]})},A=function(e){return Object(_.jsx)(R.a,{name:"forgot",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!0},autoComplete:"off",children:Object(_.jsx)(R.a.Item,{label:"T\xean \u0111\u0103ng nh\u1eadp",name:"username",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp!"}],children:Object(_.jsx)(p.a,{})})})},z=t(266),L="https://accommerce.cuongdm.tech/user-service/api",G=function(e){var n=Object(c.c)((function(e){return e.logForm})),t=Object(a.useState)(!1),r=Object(j.a)(t,2),s=r[0],o=r[1],i=Object(a.useState)(!1),l=Object(j.a)(i,2),u=l[0],h=l[1],b=Object(a.useState)("login"),m=Object(j.a)(b,2),d=m[0],p=m[1],g=Object(c.b)(),O=function(e){g({type:"CHANGE_FORM",username:e.target.value.trim().toLowerCase()})},x=function(e){g({type:"CHANGE_FORM",password:e.target.value})},f=function(e,n){p(n)},y=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,r,s,c,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.username,r=n.password,o(!0),e.next=4,E()({method:"post",url:"".concat(L,"/users/jwt"),data:{username:a,password:I()(M()(r))},responseType:"json"}).then((function(e){return e.data})).catch((function(e){return e.response.data}));case 4:if(s=e.sent,o(!1),c=s.success,i=s.token,l=s.message,c){e.next=9;break}return e.abrupt("return",k.b.error(l.includes("Password or username is incorrect")?"T\xe0i kho\u1ea3n ho\u1eb7c m\u1eadt kh\u1ea9u sai":l));case 9:localStorage.setItem("token",i),h(!1),window.location.reload();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,r,s,c,i,l,u,h,j,b,m,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),a=n.firstName,r=n.lastName,s=n.phoneNumber,c=n.username,i=n.password,l=n.rePassword,u=n.address,h=n.email,i===l){e.next=5;break}return o(!1),e.abrupt("return",k.b.error("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"));case 5:if(z.phoneNumber.exec(s)){e.next=8;break}return o(!1),e.abrupt("return",k.b.error("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i sai"));case 8:if(z.username.exec(c)){e.next=11;break}return o(!1),e.abrupt("return",k.b.error("T\xe0i kho\u1ea3n t\u1eeb 3-30 k\xfd t\u1ef1, bao g\u1ed3m ch\u1eef v\xe0 s\u1ed1"));case 11:if(z.password.exec(i)){e.next=14;break}return o(!1),e.abrupt("return",k.b.error("M\u1eadt kh\u1ea9u g\u1ed3m \xedt nh\u1ea5t 8 k\xfd t\u1ef1"));case 14:if(!h||z.email.exec(h)){e.next=17;break}return o(!1),e.abrupt("return",k.b.error("Email sai"));case 17:return j=Object.assign({firstName:a,lastName:r,phoneNumber:s,username:c,password:I()(M()(i))},u?{address:u}:{},h?{email:h}:{}),e.next=20,E()({method:"post",url:"".concat(L,"/users/"),data:j,responseType:"json"}).then((function(e){return e.data})).catch((function(e){return e.response.data}));case 20:if(b=e.sent,m=b.success,d=b.message,m){e.next=32;break}o(!1),e.t0=d,e.next=e.t0===d.includes("User with username ".concat(c," already exists"))?27:e.t0===d.includes("User with phone number ".concat(s," already exists"))?28:29;break;case 27:return e.abrupt("return",k.b.error("T\xe0i kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i"));case 28:return e.abrupt("return",k.b.error("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng"));case 29:return e.abrupt("return",k.b.error(d));case 30:e.next=33;break;case 32:k.b.success("Ng\u01b0\u1eddi d\xf9ng ".concat(a," ").concat(r," \u0111\xe3 \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n ").concat(c," th\xe0nh c\xf4ng"));case 33:setTimeout((function(){o(!1),p("login"),g({type:"RESET"})}),3e3);case 34:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{children:[Object(_.jsx)(v.a,{type:"text",id:"btn_login",color:"#2774f0",onClick:function(e){h(!0)},children:"\u0110\u0103ng nh\u1eadp"}),Object(_.jsx)(N.a,{visible:u,title:"forgot"===d?"L\u1ea5y l\u1ea1i m\u1eadt kh\u1ea9u":"login"===d?"\u0110\u0103ng nh\u1eadp":"\u0110\u0103ng k\xfd",onOk:"login"===d?y:"register"===d?P:S,onCancel:function(e){h(!1),p("login"),g({type:"RESET"})},confirmLoading:s,closeable:!1,footer:[Object(_.jsx)(v.a,{onClick:function(e){return f(0,"login"===d?"register":"login")},children:"login"!==d?"\u0110\u0103ng nh\u1eadp":"\u0110\u0103ng k\xfd"},"back"),Object(_.jsx)(v.a,{type:"primary",loading:s,onClick:"login"===d?y:"register"===d?P:S,children:"OK"},"submit")],children:"forgot"===d?Object(_.jsx)(A,{onUsernameChange:O}):"login"===d?Object(_.jsx)(F,{onForgot:function(e){return f(0,"forgot")},onUsernameChange:O,onPasswordChange:x,onLogin:y}):Object(_.jsx)(H,{onFirstNameChange:function(e){g({type:"CHANGE_FORM",firstName:e.target.value.trim()})},onLastNameChange:function(e){g({type:"CHANGE_FORM",lastName:e.target.value.trim()})},onPhoneNumberChange:function(e){g({type:"CHANGE_FORM",phoneNumber:e.target.value.trim()})},onUsernameChange:O,onPasswordChange:x,onRePasswordChange:function(e){g({type:"CHANGE_FORM",rePassword:e.target.value})},onAddressChange:function(e){g({type:"CHANGE_FORM",address:e.target.value.trim()})},onEmailChange:function(e){g({type:"CHANGE_FORM",email:e.target.value.trim().toLowerCase()})},onRegister:P})})]})},V=t(116),q=t(280),U=t(281),B=t(282),J=t(283),Q=t(284),$=t(285),K=t(286),D=function(e){var n,t=Object(a.useState)(""),r=Object(j.a)(t,2),s=r[0],c=r[1],o=Object(a.useState)(""),i=Object(j.a)(o,2),l=i[0],u=i[1],h=Object(a.useState)(["customer"]),b=Object(j.a)(h,2),m=b[0],d=b[1];Object(a.useEffect)(Object(C.a)(w.a.mark((function e(){var n,t,a,r,s,o,i,l,h;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,E()({method:"get",url:"".concat("https://accommerce.cuongdm.tech/user-service/api","/users/self"),headers:{Authorization:n,"Content-Type":"text/plain"}});case 3:if(t=e.sent,a=t.data,r=a.data,s=a.message,a.success){e.next=8;break}throw new Error(s);case 8:o=r.username,i=r.firstName,l=r.lastName,h=r.roles,c(o),u("".concat(i," ").concat(l)),d(h);case 12:case"end":return e.stop()}}),e)}))));var p=Object(_.jsxs)(q.a,{onClick:function(e){switch(e.key){case"self":case"admin":case"seller":case"setting":break;case"logout":localStorage.removeItem("token"),window.location.reload()}},children:[Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(B.a,{}),children:l},"self"),m.includes("admin")&&Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(J.a,{}),children:Object(_.jsx)("a",{href:"/admin",children:"Qu\u1ea3n tr\u1ecb"})},"admin"),m.includes("seller")&&Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(Q.a,{}),children:Object(_.jsx)("a",{href:"/store",children:"C\u1eeda h\xe0ng"})},"seller"),Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)($.a,{}),children:"C\xe0i \u0111\u1eb7t"},"setting"),Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(K.a,{}),children:"\u0110\u0103ng xu\u1ea5t"},"logout")]});return Object(_.jsx)(U.a,{overlay:p,children:Object(_.jsx)(v.a,(n={size:"large",shape:"round"},Object(V.a)(n,"shape","round"),Object(V.a)(n,"id","btn_user"),Object(V.a)(n,"children",s),n))})},W=function(e,n){return Object(_.jsxs)("div",{style:{color:"#fff",textAlign:"center",verticalAlign:"baseline"},children:[Object(_.jsx)(e,{style:{fontSize:"2em"}}),Object(_.jsx)("div",{children:n})]})},X=h.a.Header,Y=function(e){var n=Object(a.useState)("3em"),t=Object(j.a)(n,2),r=t[0],s=t[1],o=Object(c.c)((function(e){return e.token})),i=(Object(c.b)(),function(){});console.log(W(O.a));return Object(_.jsxs)(b.a,{id:"Header",justify:"start",children:[Object(_.jsx)(m.a,{span:1}),Object(_.jsx)(m.a,{span:4,children:Object(_.jsx)(h.a,{width:"20%",children:Object(_.jsx)(X,{width:"100%",children:Object(_.jsx)("a",{href:"/",children:Object(_.jsx)(d.a,{src:"/img/acCommerce.png",href:"/",height:100,preview:!1})})})})}),Object(_.jsxs)(m.a,{span:13,children:[Object(_.jsx)(b.a,{children:Object(_.jsx)(m.a,{span:24,children:Object(_.jsx)("div",{id:"headerSearch",children:Object(_.jsx)(p.a.Search,{id:"inp_headerSearch",placeholder:"Nh\u1eadp t\xean s\u1ea3n ph\u1ea9m, th\u01b0\u01a1ng hi\u1ec7u mu\u1ed1n t\xecm ...",allowClear:!0,onSearch:i,size:"large",onPressEnter:i})})})}),Object(_.jsxs)(b.a,{children:[Object(_.jsx)(m.a,{span:3,children:W(O.a,"\u0110i\u1ec7n tho\u1ea1i")}),Object(_.jsx)(m.a,{span:3,children:W(x.a,"Gia d\u1ee5ng")})]})]}),Object(_.jsx)(m.a,{span:3,children:localStorage.getItem("token")?Object(_.jsx)(D,{token:o}):Object(_.jsx)(G,{})}),Object(_.jsx)(m.a,{span:1,children:Object(_.jsx)("div",{className:"cart-container",children:Object(_.jsx)("div",{className:"header-cart",children:Object(_.jsx)("a",{id:"cart",children:Object(_.jsx)(g.a,{count:1,children:Object(_.jsx)("svg",{id:"icon-cart",width:r,height:r,fill:"#fff",viewBox:"0 0 1024 1024",onMouseOver:function(e){return s("4em")},onMouseLeave:function(e){return s("3em")},children:Object(_.jsx)("path",{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"})})})})})})}),Object(_.jsx)(m.a,{span:2}),Object(_.jsx)("hr",{})]})},Z=function(e){return Object(_.jsx)(h.a,{children:Object(_.jsx)(Y,{})})},ee=function(e){return Object(_.jsx)("div",{})},ne=function(e){return Object(_.jsx)("div",{})},te=function(){u().location;return Object(_.jsx)(o.b,{history:u(),children:Object(_.jsxs)(o.c,{children:[Object(_.jsx)(o.a,{exact:!0,path:"/",component:Z}),Object(_.jsx)(o.a,{exact:!0,path:"/seller",component:ee}),Object(_.jsx)(o.a,{exact:!0,path:"/admin",component:ne})]})})},ae=t(126),re={username:"",user:""},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOG_IN":var t=n.username,a=n.user;return{username:t,user:a};case"LOG_OUT":return{username:"",user:""};default:return e}},ce={firstName:"",lastName:"",phoneNumber:"",username:"",password:"",rePassword:"",address:"",email:""},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CHANGE_FORM":var t=n.firstName,a=n.lastName,r=n.phoneNumber,s=n.username,c=n.password,o=n.rePassword,i=n.address,l=n.email;return Object.assign(e,t?{firstName:t}:{},a?{lastName:a}:{},r?{phoneNumber:r}:{},s?{username:s}:{},c?{password:c}:{},o?{rePassword:o}:{},i?{address:i}:{},l?{email:l}:{});case"RESET":return{firstName:"",lastName:"",phoneNumber:"",username:"",password:"",rePassword:"",address:"",email:""};default:return e}},ie=Object(ae.a)({user:se,logForm:oe}),le=Object(ae.b)(ie);s.a.render(Object(_.jsx)(c.a,{store:le,children:Object(_.jsx)(te,{})}),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.334dcc00.chunk.js.map