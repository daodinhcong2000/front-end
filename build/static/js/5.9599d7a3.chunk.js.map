{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","services/axiosInstance.js","services/api/sellerApi.js","app/seller/views/products/AddProduct.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","axiosInstance","axios","create","baseURL","configs","url","headers","Authorization","localStorage","getItem","interceptors","request","use","config","token","getShops","a","get","console","log","postProduct","id","data","post","AddProduct","inputFile","useRef","useState","name","description","category","sizes","images","price","setData","numberInStock","setSizes","setImages","imageUrls","setImageUrls","listShop","handleChange","e","target","value","handleInputChange","index","list","handleAddClick","className","options","label","htmlFor","type","placeholder","onChange","invalid","required","rows","xs","map","size","i","length","color","shape","onClick","splice","handleRemoveClick","multiple","files","handleAddImage","ref","style","display","current","click","image","formData","FormData","append","then","response","secure_url","catch","err","error","imageUrl","fluid","src","width","height","event","preventDefault"],"mappings":"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","file":"static/js/5.9599d7a3.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import axios from \"axios\";\nimport configs from \"../configs/service\";\n\nconst axiosInstance = axios.create({\n  baseURL: configs.url,\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Authorization: localStorage.getItem(\"token\"),\n  },\n});\n\n// Add a request interceptor\naxiosInstance.interceptors.request.use(function (config) {\n  const token = localStorage.getItem(\"token\");\n  config.headers.Authorization = token;\n\n  return config;\n});\n\n\nexport default axiosInstance;","import axios from 'axios';\nimport axiosInstance from '../axiosInstance';\n\nconst url = 'https://accommerce.cuongdm.tech/seller-service/api';\n\n\nexport const getShops = async () => {\n    try {\n        // axiosInstance(url);\n        return  await axios.get(`${url}/shops`) \n    } catch (error) {\n        console.log('error while calling login API: ', error);\n    }\n}\n\nexport const postProduct = async (id , data) => {\n    try {\n        return  await axiosInstance(url).post(`/shops/${id}/products`, data) \n    } catch (error) {\n        console.log('error while calling login API: ', error);\n    }\n}\n\n","import React, { useState, useRef } from 'react'\nimport axios from \"axios\";\nimport { getShops, postProduct } from '../../../../services/api/sellerApi'\nimport {\n  CButton,\n  CCol,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  CFormLabel,\n  CFormCheck,\n  CFormTextarea,\n  CInputGroupText,\n  CImage,\n  CRow,\n  CFormFeedback,\n  CFormSelect,\n} from '@coreui/react'\n\nconst AddProduct = () => {\n  const inputFile = useRef(null)\n  const [data, setData] = useState(\n    {\n      name: \"\",\n      description: \"\",\n      category: \"\",\n      sizes: [],\n      images: [],\n      price: \"\",\n    })\n\n  const [sizes, setSizes] = useState([{ name: \"\", numberInStock: \"\" }]);\n  const [images, setImages] = useState([]);\n  const [imageUrls, setImageUrls] = useState([]);\n  const [shopId, setShopId] = useState(\"\");\n\n  const listShop = getShops();\n  console.log(listShop)\n  // data.images = data.images.concat(imageUrls);\n  const uploadImage = (e) => {\n    setImageUrls([])\n    images.map((image, i) => {\n      // Tạo một form data chứa dữ liệu gửi lên\n      const formData = new FormData();\n      // Hình ảnh cần upload\n      formData.append(\"file\", image);\n      // Tên preset vừa tạo ở bước 1\n      formData.append(\"upload_preset\", \"new_preset\");\n      // Tải ảnh lên cloudinary\n      // API: https://api.cloudinary.com/v1_1/{Cloudinary-Name}/image/upload\n      axios\n        .post(\"https://api.cloudinary.com/v1_1/accomerce/image/upload\", formData)\n        .then((response) => {\n          setImageUrls(imageUrls => [...imageUrls, response.data.secure_url]);\n\n        })\n        .catch((err) => console.error(err));\n    });\n  };\n\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(data)\n    postProduct(1, data);\n  }\n\n  const handleChange = e => setData({ ...data, [e.target.name]: e.target.value });\n  // handle input change\n  const handleInputChange = (e, index) => {\n    const { name, value } = e.target;\n    const list = [...sizes];\n    list[index][name] = value;\n    setSizes(list);\n    data.sizes = sizes;\n  };\n\n  // handle click event of the Remove button\n  const handleRemoveClick = index => {\n    const list = [...sizes];\n    list.splice(index, 1);\n    setSizes(list);\n    data.sizes.splice(index, 1);\n  };\n  console.log(data);\n  // handle click event of the Add button\n  const handleAddClick = () => {\n    setSizes([...sizes, { name: \"\", numberInStock: \"\" }]);\n  };\n\n  const handleAddImage = (e) => {\n    for (let i = 0; i < e.target.files.length; i++) {\n      setImages(images => [...images, e.target.files[i]]);\n    };\n    ;\n  };\n\n  const onButtonClick = () => {\n    inputFile.current.click();\n    uploadImage();\n  };\n  return (\n\n  <div>\n      <div className=\"mb-3\">\n      <CFormSelect\n        className=\"row g-3\"\n        aria-label=\"Default select example\"\n        options={[\n          'Vui lòng chọn shop của bạn',\n          { label: 'One', value: '1' },\n          { label: 'Two', value: '2' },\n          { label: 'Three', value: '3'}\n        ]}\n      />\n      </div>\n    <CForm className=\"row g-3\">\n      <div className=\"mb-3\">\n        <CFormLabel htmlFor=\"exampleFormControlInput1\" >Tên sản phẩm</CFormLabel>\n        <CFormInput type=\"text\" id=\"exampleFormControlInput1\" name=\"name\" placeholder=\"Nhập tên sản phẩm\" onChange={e => handleChange(e)} invalid required />\n        <CFormFeedback invalid>Vui lòng nhập tên sản phẩm</CFormFeedback>\n      </div>\n      <div className=\"mb-3\">\n        <CFormLabel htmlFor=\"exampleFormControlTextarea1\">Mô tả sản phẩm</CFormLabel>\n        <CFormTextarea id=\"exampleFormControlTextarea1\" rows=\"3\" name=\"description\" onChange={e => handleChange(e)} invalid required></CFormTextarea>\n        <CFormFeedback invalid>Vui lòng nhập tên sản phẩm</CFormFeedback>\n      </div>\n      <div className=\"mb-3\">\n        <CFormLabel htmlFor=\"exampleFormControlInput1\">Loại sản phẩm</CFormLabel>\n        <CFormInput invalid required type=\"text\" id=\"exampleFormControlInput1\" name=\"category\" placeholder=\"Nhập loại mặt hàng mà bạn muốn đề xuất\" onChange={e => handleChange(e)} />\n      </div>\n      <CCol xs={12}>\n        <CFormLabel htmlFor=\"inputAddress\">Kích thước</CFormLabel>\n        {sizes.map((size, i) => {\n          return (\n            <div className=\"box\">\n              <CRow>\n                <CCol xs>\n                  <CFormInput\n                    name=\"name\"\n                    value={size.name}\n                    placeholder=\"Nhập kích thước\"\n                    onChange={e => handleInputChange(e, i)}\n                  />\n                </CCol>\n                <CCol xs>\n                  <CFormInput\n                    name=\"numberInStock\"\n                    value={size.numberInStock}\n                    placeholder=\"Nhập số lượng\"\n                    onChange={e => handleInputChange(e, i)}\n                  />\n                </CCol>\n              </CRow>\n              {sizes.length - 1 === i && <CButton color=\"dark\" shape=\"rounded-pill\" onClick={handleAddClick} size=\"sm\" >Thêm</CButton>}\n              {sizes.length !== 1 && <CButton\n                color=\"dark\" shape=\"rounded-pill\" size=\"sm\"\n                onClick={() => handleRemoveClick(i)}>Xóa</CButton>}\n            </div>\n          )\n        })\n        }\n      </CCol>\n      <CCol xs={12}>\n        <CFormInput type=\"file\" multiple onChange={(e) => { handleAddImage(e) }} ref={inputFile} style={{ display: 'none' }} />\n        <CButton onClick={onButtonClick}>Thêm ảnh</CButton>\n        {/* <CButton onClick={uploadImage}>Xem ảnh</CButton> */}\n      </CCol>\n      <CCol xs={12}>\n        {imageUrls.map((imageUrl) => {\n          return (\n            <CImage fluid src={imageUrl} width={150} height={150} />\n          )\n        })}\n      </CCol>\n      <CInputGroup className=\"mb-3\">\n        <CInputGroupText>$</CInputGroupText>\n        <CFormInput aria-label=\"Amount (to the nearest dollar)\" name=\"price\" onChange={e => handleChange(e)} />\n        <CInputGroupText>VNĐ</CInputGroupText>\n      </CInputGroup>\n      <CCol xs={12}>\n        <CButton onClick={handleSubmit} type=\"submit\" >Đăng sản phẩm</CButton>\n      </CCol>\n    </CForm>\n  </div>\n  )\n}\n\nexport default AddProduct"],"sourceRoot":""}