{"version":3,"sources":["services/api/adminApi.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError.js","app/admin/views/user/listUsersDetail.js"],"names":["apiRequest","makeAuthRequest","urlUser","urlAdmin","getUsers","url","method","putActiveUser","idUser","payload","data","deleteUser","getShops","query","query2string","name","Error","putApproved","idShop","putActiveShop","deleteShop","ListUsersDetail","useToast","error","success","warn","info","useState","details","setDetails","listUsers","setListUsers","useEffect","then","response","users","map","i","_id","getBadge","role","activePage","cleaner","clickableRows","columns","label","key","_style","width","_props","className","filter","sorter","color","columnFilter","noItemsLabel","columnSorter","items","itemsPerPageSelect","itemsPerPage","pagination","scopedColumns","email","item","roles","length","show_details","variant","shape","size","onClick","index","event","preventDefault","position","indexOf","newDetails","slice","splice","toggleDetails","includes","visible","xs","htmlFor","disabled","value","firstName","lastName","isActive","user","status","respone","message","setTimeout","window","location","reload","catch","err","changeStatus","sorterValue","column","state","tableFilter","tableProps","striped","hover"],"mappings":"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","file":"static/js/11.c4374790.chunk.js","sourcesContent":["import { makeAuthRequest } from '../makeApiRequest'\nconst apiRequest = makeAuthRequest(true)\nimport query2string from '../../helpers/validating/query2string'\nconst urlUser = '/user-service/api'\nconst urlAdmin = '/admin-service/api'\n\nexport const getUsers = () => {\n  return apiRequest({\n    url: `${urlUser}/users`,\n    method: 'GET'\n  })\n}\n\nexport const putActiveUser = (idUser, payload) => {\n  return apiRequest({\n    url: `${urlUser}/users/${idUser}`,\n    method: 'PUT',\n    data: payload\n  })\n}\n\nexport const deleteUser = (idUser) => {\n  return apiRequest({\n    url: `${urlUser}/users/${idUser}`,\n    method: 'DELETE'\n  })\n}\n\nexport const getShops = (query) => {\n  const queryString = ''\n  if (query != null) {\n    queryString = query2string(query)\n  }\n\n  return apiRequest({\n    url: `${urlAdmin}/shops?${queryString}`,\n    method: 'GET'\n  })\n}\n\nexport const putApproved = (idShop, payload) => {\n  return apiRequest({\n    url: `${urlAdmin}/shops/${idShop}/approval`,\n    method: 'PUT',\n    data: payload\n  })\n}\n\nexport const putActiveShop = (idShop, payload) => {\n  return apiRequest({\n    url: `${urlAdmin}/shops/${idShop}/active-status`,\n    method: 'PUT',\n    data: payload\n  })\n}\n\nexport const deleteShop = (idShop) => {\n  return apiRequest({\n    url: `${urlAdmin}/shops/${idShop}`,\n    method: 'DELETE'\n  })\n}\n","export default function _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}","import React, { useState, useEffect } from 'react'\nimport { getUsers, deleteUser, putActiveUser } from '../../../../services/api/adminApi'\nimport { CSmartTable, CBadge, CButton, CCollapse, CCardBody } from '@coreui/react-pro'\nimport { CCol, CFormInput, CFormLabel, CRow } from '@coreui/react'\nimport { useToast } from '../../../../contexts/toast'\n\nconst ListUsersDetail = () => {\n  const { error, warn, info, success } = useToast()\n  const [details, setDetails] = useState([])\n  const columns = [\n    {\n      label: 'Tên tài khoản',\n      key: 'username',\n      _style: { width: '40%' },\n      _props: { className: 'fw-semibold' }\n    },\n    {\n      label: 'Email',\n      key: 'email'\n    },\n    {\n      label: 'Số điện thoại',\n      key: 'phoneNumber',\n      filter: true,\n      sorter: false,\n      _style: { width: '20%' }\n    },\n    { label: 'Vai trò', filter: false, key: 'roles', _style: { width: '20%' } },\n    {\n      key: 'show_details',\n      label: '',\n      _style: { width: '1%' },\n      filter: false,\n      sorter: false,\n      _props: { color: 'primary', className: 'fw-semibold' }\n    }\n  ]\n  const [listUsers, setListUsers] = useState([])\n  useEffect(() => {\n    getUsers().then((response) => {\n      response.data.data.users.map((data, i) => {\n        data.idUser = data._id\n      })\n      setListUsers(response.data.data.users)\n    })\n  }, [])\n\n  const getBadge = (role) => {\n    switch (role) {\n      case 'customer':\n        return 'success'\n      case 'seller':\n        return 'warning'\n      case 'admin':\n        return 'danger'\n      default:\n        return 'primary'\n    }\n  }\n\n  const toggleDetails = (index) => {\n    event.preventDefault()\n    const position = details.indexOf(index)\n    let newDetails = details.slice()\n    if (position !== -1) {\n      newDetails.splice(position, 1)\n    } else {\n      newDetails = [...details, index]\n    }\n    setDetails(newDetails)\n  }\n\n  const handleDelete = (idUser) => {\n    //console.log(idUser)\n    deleteUser(idUser)\n      .then((respone) => {\n        success(respone.data.message)\n        setTimeout(window.location.reload(false), 3000)\n      })\n      .catch((err) => {\n        error(err.response.data.message)\n      })\n  }\n  const changeStatus = (user) => {\n    const status = {\n      isActive: !user.isActive\n    }\n    putActiveUser(user.idUser, status)\n      .then((respone) => {\n        success(respone.data.message)\n        setTimeout(window.location.reload(false), 3000)\n      })\n      .catch((err) => {\n        error(err.response.data.message)\n      })\n  }\n  return (\n    <div>\n      <CSmartTable\n        activePage={3}\n        cleaner\n        clickableRows\n        columns={columns}\n        columnFilter\n        noItemsLabel=\"Không có người dùng nào\"\n        columnSorter\n        items={listUsers}\n        itemsPerPageSelect\n        itemsPerPage={5}\n        pagination\n        scopedColumns={{\n          email: (item) => <td>{item.email != '' ? item.email : ''}</td>,\n          roles: (item) => (\n            <td>\n              <CBadge color={getBadge(item.roles[item.roles.length - 1])}>{item.roles[item.roles.length - 1]}</CBadge>\n            </td>\n          ),\n          show_details: (item) => {\n            return (\n              <td className=\"py-2\">\n                <CButton\n                  variant=\"outline\"\n                  shape=\"square\"\n                  size=\"sm\"\n                  onClick={() => {\n                    toggleDetails(item._id)\n                  }}\n                >\n                  {details.includes(item._id) ? 'Hide' : 'Show'}\n                </CButton>\n              </td>\n            )\n          },\n          details: (item) => {\n            return (\n              <CCollapse visible={details.includes(item._id)}>\n                <CCardBody>\n                  <div className=\"mb-3\">\n                    <CRow>\n                      <CCol xs>\n                        <CFormLabel htmlFor=\"exampleFormControlInput1\">Họ</CFormLabel>\n                        <CFormInput\n                          aria-label=\"Amount (to the nearest dollar)\"\n                          name=\"price\"\n                          disabled\n                          value={item.firstName}\n                        />\n                      </CCol>\n                      <CCol xs>\n                        <CFormLabel htmlFor=\"exampleFormControlInput1\">Tên</CFormLabel>\n                        <CFormInput\n                          aria-label=\"Amount (to the nearest dollar)\"\n                          name=\"originalPrice\"\n                          disabled\n                          value={item.lastName}\n                        />\n                      </CCol>\n                    </CRow>\n                  </div>\n                  <div className=\"mb-3\">\n                    <CRow>\n                      <CCol xs>\n                        <CFormLabel htmlFor=\"exampleFormControlInput1\">Trạng thái:</CFormLabel>\n                        {item.isActive ? (\n                          <CButton color=\"success\" variant=\"outline\" disabled>\n                            Đã kích hoạt\n                          </CButton>\n                        ) : (\n                          <CButton disabled color=\"danger\" variant=\"outline\">\n                            Chưa kích hoạt\n                          </CButton>\n                        )}\n                      </CCol>\n                      <CCol xs>\n                        {item.roles[item.roles.length - 1] != 'admin' ? (\n                          <CButton color=\"info\" variant=\"outline\" onClick={() => changeStatus(item)}>\n                            Đổi trạng thái\n                          </CButton>\n                        ) : (\n                          ''\n                        )}\n                      </CCol>\n                    </CRow>\n                  </div>\n                  <div className=\"mb-3\">\n                    {item.roles[item.roles.length - 1] != 'admin' ? (\n                      <CButton color=\"danger\" shape=\"rounded-pill\" onClick={() => handleDelete(item.idUser)}>\n                        Xóa\n                      </CButton>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                </CCardBody>\n              </CCollapse>\n            )\n          }\n        }}\n        sorterValue={{ column: 'name', state: 'asc' }}\n        tableFilter\n        tableProps={{\n          striped: true,\n          hover: true\n        }}\n      />\n    </div>\n  )\n}\n\nexport default ListUsersDetail\n"],"sourceRoot":""}